%------------------------------------------------
%                Proof Environment 
%------------------------------------------------

\newcounter{prf}[subsection]
\setcounter{prf}{0}

\renewcommand{\theprf}{\arabic{subsection}.\arabic{prf}}

\newenvironment{prf}[2][]{%
    \refstepcounter{prf}%
    \ifstrempty{#1}%
    {\mdfsetup{%
        frametitle={%
        \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=red!20]
        {\strut Proof~\theprf};}}%
    }%
    {\mdfsetup{%
        frametitle={%
        \tikz[baseline=(current bounding box.east),outer sep=0pt]
        \node[anchor=east,rectangle,fill=red!20]
        {\strut Proof~\theprf:~#1};}}%
    }%
    \mdfsetup{innertopmargin=10pt,linecolor=red!20,%
    linewidth=2pt,topline=true,%
    frametitleaboveskip=\dimexpr-\ht\strutbox\relax
    }%
    \begin{mdframed}[]\relax%
    \label{#2}}{
        \vspace{-0.25cm}
        \begin{flushright}
            \qed % Move QED to the right
        \end{flushright}
        \vspace*{0cm}
        \end{mdframed}}
